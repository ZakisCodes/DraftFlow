<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Modern Chat Interface</title>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="{{url_for('static', path ='css/style2.css')}}?v={{ time }}">
    <script src="https://cdn.jsdelivr.net/npm/dompurify@2.4.0/dist/purify.min.js"></script>

</head>

<body>
    <main class="chat-content">
        <div class="chat-layout">
            <section class="chat-column">
                <div class="resize-handle" id="resizeHandle"></div>
                <div class="chat-panel">
                    <div class="nav-bar-chatbox">
                        <a href="/home" class="logo-link">

                            <div class="logo-container  option-1">
                                <div class="logo-avatar  clean">
                                    <img src="static/IMG/logo1_bg.png" alt="Your Logo">
                                </div>
                                <div class="brand-text">DraftFlow</div>
                            </div>

                        </a>
                    </div>
                    <div class="chat-container">
                        <div class="chat-window">
                            <div class="messages-wrapper" id="messagesWrapper">
                                <div class="inner-message-wrapper">

                                    <div class="message-container received">
                                        <div class="message message-received">Hi there! How can I help you today? ðŸ‘‹
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <!-- Subject Box -->
                            <div class="subject-box" id="subjectBox">
                                <div class="subject-text" id="subjectText"></div>
                                <button class="subject-close" id="subjectCloseBtn" title="Remove subject">
                                    <svg viewBox="0 0 24 24">
                                        <path
                                            d="M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z" />
                                    </svg>
                                </button>
                            </div>


                        </div>
                        <div class="message-input-container">
                            <div class="input-top-row">

                                <textarea class="message-input" placeholder="Ask anything..." id="messageInput"
                                    rows="1"></textarea>
                            </div>

                            <div class="input-bottom-row">
                                <div class="input-bottom-left">

                                    <button class="star-button" id="toolsBtn" title="Tools">
                                        <svg class="star-icon" viewBox="0 0 24 24">
                                            <path
                                                d="M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z" />
                                        </svg>

                                        <div class="tools-popup" id="toolsPopup">
                                            
                                            <div class="tool-item" data-tool="search" data-tool-name="Web search">
                                                <svg class="tool-icon" viewBox="0 0 24 24">
                                                    <path
                                                        d="M15.5 14h-.79l-.28-.27C15.41 12.59 16 11.11 16 9.5 16 5.91 13.09 3 9.5 3S3 5.91 3 9.5 5.91 16 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19l-4.99-5zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14z" />
                                                </svg>
                                                Search the web
                                            </div>

                                            
                                            <div class="tool-divider"></div>

                                            <div class="tool-item" data-tool="research" data-tool-name="Research">
                                                <svg class="tool-icon" viewBox="0 0 24 24">
                                                    <path
                                                        d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-2 15l-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z" />
                                                </svg>
                                                Research agent
                                                <span class="tool-remaining">5 left</span>
                                            </div>

                                        </div>
                                    </button>
                                    <div class="selected-tool" id="selectedTool">
                                        <svg class="selected-tool-icon" id="selectedToolIcon" viewBox="0 0 24 24">
                                        </svg>
                                        <span class="selected-tool-name" id="selectedToolName"></span>
                                        <button class="selected-tool-close" id="selectedToolClose" title="Remove tool">
                                            <svg class="selected-tool-close-icon" viewBox="0 0 24 24">
                                                <path
                                                    d="M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z" />
                                            </svg>
                                        </button>
                                    </div>
                                </div>
                                <div class="input-bottom-right">

                                    <button class="action-button" id="voiceBtn" title="Voice input">
                                        <svg class="action-icon" viewBox="0 0 24 24">
                                            <path
                                                d="M12 14c1.66 0 2.99-1.34 2.99-3L15 5c0-1.66-1.34-3-3-3S9 3.34 9 5v6c0 1.66 1.34 3 3 3zm5.3-3c0 3-2.54 5.1-5.3 5.1S6.7 14 6.7 11H5c0 3.41 2.72 6.23 6 6.72V21h2v-3.28c3.28-.48 6-3.3 6-6.72h-1.7z" />
                                        </svg>
                                    </button>

                                    <button class="send-button" id="sendButton" title="Send message" disabled>
                                        <svg class="send-icon" viewBox="0 0 24 24">
                                            <path d="M2.01 21L23 12 2.01 3 2 10l15 2-15 2z" />
                                        </svg>
                                    </button>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </section>

            <section class="content-column">
                <div class="content-panel">
                    <div class="nav-bar">
                        <div class="document-title-container">
                            <input type="text" class="document-title-input" value="Untitled" placeholder="Untitled">
                            <div class="save-status" id="save-status">Saved</div>
                        </div>
                        <div class="tooltip-container">
                            <button class="nav-button" id="undoBtn">
                                <svg class="nav-icon" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                                    <path
                                        d="M12.5,8C9.85,8 7.45,9 5.6,10.6L2,7V16H11L7.38,12.38C8.77,11.22 10.54,10.5 12.5,10.5C16.04,10.5 19.05,12.81 20.1,16L22.47,15.22C21.08,11.03 17.15,8 12.5,8Z" />
                                </svg>
                            </button>
                            <div class="tooltip-text">Undo</div>
                        </div>

                        <div class="tooltip-container">
                            <button class="nav-button" id="redoBtn">
                                <svg class="nav-icon" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                                    <path
                                        d="M18.4,10.6C16.55,9 14.15,8 11.5,8C6.85,8 2.92,11.03 1.53,15.22L3.9,16C4.95,12.81 7.96,10.5 11.5,10.5C13.46,10.5 15.23,11.22 16.62,12.38L13,16H22V7L18.4,10.6Z" />
                                </svg>
                            </button>
                            <div class="tooltip-text">Redo</div>
                        </div>
                        <div class="tooltip-container">

                            <button class="nav-button export-button" onclick="openExportModal()" id="downloadBtn"
                                title="Download">
                                <svg class="nav-icon" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                                    <path d="M5,20H19V18H5M19,9H15V3H9V9H5L12,16L19,9Z" />
                                </svg>
                            </button>
                            <div class="tooltip-text">Click to Submit</div>
                        </div>
                        <div class="tooltip-container">

                            <button class="nav-button" id="copyBtn">
                                <svg class="nav-icon" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                                    <path
                                        d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z" />
                                </svg>
                            </button>
                            <div class="tooltip-text">Copy</div>
                        </div>
                        <div class="tooltip-container">


                            <button class="nav-button" id="shareBtn">
                                <svg class="nav-icon" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                                    <path
                                        d="M18,16.08C17.24,16.08 16.56,16.38 16.04,16.85L8.91,12.7C8.96,12.47 9,12.24 9,12C9,11.76 8.96,11.53 8.91,11.3L15.96,7.19C16.5,7.69 17.21,8 18,8A3,3 0 0,0 21,5A3,3 0 0,0 18,2A3,3 0 0,0 15,5C15,5.24 15.04,5.47 15.09,5.7L8.04,9.81C7.5,9.31 6.79,9 6,9A3,3 0 0,0 3,12A3,3 0 0,0 6,15C6.79,15 7.5,14.69 8.04,14.19L15.16,18.34C15.11,18.55 15.08,18.77 15.08,19C15.08,20.61 16.39,21.91 18,21.91C19.61,21.91 20.92,20.61 20.92,19A2.92,2.92 0 0,0 18,16.08Z" />
                                </svg>
                            </button>

                            <div class="tooltip-text">Share</div>
                        </div>
                        <div class="tooltip-container">
                            <button class="nav-button" id="previewBtn">
                                <svg class="nav-icon" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                                    <path
                                        d="M12,9A3,3 0 0,0 9,12A3,3 0 0,0 12,15A3,3 0 0,0 15,12A3,3 0 0,0 12,9M12,17A5,5 0 0,1 7,12A5,5 0 0,1 12,7A5,5 0 0,1 17,12A5,5 0 0,1 12,17M12,4.5C7,4.5 2.73,7.61 1,12C2.73,16.39 7,19.5 12,19.5C17,19.5 21.27,16.39 23,12C21.27,7.61 17,4.5 12,4.5Z" />
                                </svg>
                            </button>
                            <div class="tooltip-text">Preview Mode</div>
                        </div>
                        <div class="tooltip-container">

                            <button class="nav-button" id="fullscreenBtn">
                                <svg class="nav-icon" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                                    <path
                                        d="M5,5H10V7H7V10H5V5M14,5H19V10H17V7H14V5M17,14H19V19H14V17H17V14M10,17V19H5V14H7V17H10Z" />
                                </svg>
                            </button>
                            <div class="tooltip-text">Fullscreen</div>

                        </div>
                        <div class="profile-area">
                            <div class="profile-loading">
                                <button class="profile-button" id="profileBtn">
                                    <div class="profile-avatar">
                                        <span id="initial">ZA</span>
                                    </div>
                                </button>
                            </div>

                            <div class="profile-dropdown" id="profileDropdown">
                                <div class="profile-dropdown-content">
                                    <div class="profile-header">
                                        <div class="profile-avatar">
                                            <span id="initial-dropdown">ZA</span>
                                        </div>
                                        <div class="profile-info">
                                            <div class="profile-name" id="proname">Zakin Abdul</div>
                                            <div class="profile-email" id="proemail">zakinabdul.tech@gmail.com</div>
                                        </div>
                                    </div>

                                    <div class="profile-menu">
                                        <a href="#" class="profile-menu-item" data-action="settings">
                                            <svg width="20" height="20" viewBox="0 0 24 24" fill="currentColor">
                                                <path
                                                    d="M12,15.5A3.5,3.5 0 0,1 8.5,12A3.5,3.5 0 0,1 12,8.5A3.5,3.5 0 0,1 15.5,12A3.5,3.5 0 0,1 12,15.5M19.43,12.97C19.47,12.65 19.5,12.33 19.5,12C19.5,11.67 19.47,11.34 19.43,11.03L21.54,9.37C21.73,9.22 21.78,8.95 21.66,8.73L19.66,5.27C19.54,5.05 19.27,4.96 19.05,5.05L16.56,6.05C16.04,5.66 15.5,5.32 14.87,5.07L14.5,2.42C14.46,2.18 14.25,2 14,2H10C9.75,2 9.54,2.18 9.5,2.42L9.13,5.07C8.5,5.32 7.96,5.66 7.44,6.05L4.95,5.05C4.73,4.96 4.46,5.05 4.34,5.27L2.34,8.73C2.22,8.95 2.27,9.22 2.46,9.37L4.57,11.03C4.53,11.34 4.5,11.67 4.5,12C4.5,12.33 4.53,12.65 4.57,12.97L2.46,14.63C2.27,14.78 2.22,15.05 2.34,15.27L4.34,18.73C4.46,18.95 4.73,19.03 4.95,18.95L7.44,17.94C7.96,18.34 8.5,18.68 9.13,18.93L9.5,21.58C9.54,21.82 9.75,22 10,22H14C14.25,22 14.46,21.82 14.5,21.58L14.87,18.93C15.5,18.68 16.04,18.34 16.56,17.94L19.05,18.95C19.27,19.03 19.54,18.95 19.66,18.73L21.66,15.27C21.78,15.05 21.73,14.78 21.54,14.63L19.43,12.97Z" />
                                            </svg>
                                            <span>Settings</span>
                                        </a>

                                        <a href="#" class="profile-menu-item" data-action="help">
                                            <svg width="20" height="20" viewBox="0 0 24 24" fill="currentColor">
                                                <path
                                                    d="M11,18H13V16H11V18ZM12,2A10,10 0 0,0 2,12A10,10 0 0,0 12,22A10,10 0 0,0 22,12A10,10 0 0,0 12,2ZM12,20C7.59,20 4,16.41 4,12C4,7.59 7.59,4 12,4C16.41,4 20,7.59 20,12C20,16.41 16.41,20 12,20ZM12,6A4,4 0 0,0 8,10H10A2,2 0 0,1 12,8A2,2 0 0,1 14,10C14,12 11,11.75 11,15H13C13,12.75 16,12.5 16,10A4,4 0 0,0 12,6Z" />
                                            </svg>
                                            <span>Help & Support</span>
                                        </a>

                                        <a href="#" class="profile-menu-item" data-action="about">
                                            <svg width="20" height="20" viewBox="0 0 24 24" fill="currentColor">
                                                <path
                                                    d="M13,9H11V7H13M13,17H11V11H13M12,2A10,10 0 0,0 2,12A10,10 0 0,0 12,22A10,10 0 0,0 22,12A10,10 0 0,0 12,2Z" />
                                            </svg>
                                            <span>About</span>
                                        </a>

                                        <a href="#" class="profile-menu-item" data-action="privacy">
                                            <svg width="20" height="20" viewBox="0 0 24 24" fill="currentColor">
                                                <path
                                                    d="M12,1L3,5V11C3,16.55 6.84,21.74 12,23C17.16,21.74 21,16.55 21,11V5L12,1M12,7C13.4,7 14.8,8.6 14.8,10V11H16V18H8V11H9.2V10C9.2,8.6 10.5,8.7 10.5,9.5V11H13.5V9.5C13.5,8.7 12.8,8.2 12,8.2Z" />
                                            </svg>
                                            <span>Privacy</span>
                                        </a>

                                        <div class="profile-menu-divider"></div>

                                        <a href="#" class="profile-menu-item logout" data-action="logout" id="logout">
                                            <svg width="20" height="20" viewBox="0 0 24 24" fill="currentColor">
                                                <path
                                                    d="M16,17V14H9V10H16V7L21,12L16,17M14,2A2,2 0 0,1 16,4V6H14V4H5V20H14V18H16V20A2,2 0 0,1 14,22H5A2,2 0 0,1 3,20V4A2,2 0 0,1 5,2H14Z" />
                                            </svg>
                                            <span>Logout</span>
                                        </a>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- Export Modal -->
                        <div class="export-modal" id="exportModal">
                            <div class="export-content">
                                <div class="export-header">
                                    <h2 class="export-title">Export Options</h2>
                                    <button class="close-button" onclick="closeExportModal()">
                                        <svg width="24" height="24" viewBox="0 0 24 24" fill="none"
                                            xmlns="http://www.w3.org/2000/svg">
                                            <path d="M18 6L6 18M6 6L18 18" stroke="currentColor" stroke-width="2"
                                                stroke-linecap="round" stroke-linejoin="round" />
                                        </svg>
                                    </button>
                                </div>

                                <div class="export-options">
                                    <div class="option-group">
                                        <div class="option-label">File Name</div>
                                        <div class="option-buttons">
                                            <input type="text" class="document-title-input title-export"
                                                value="Untitled" placeholder="Untitled" id="fileName">

                                        </div>
                                    </div>
                                    <div class="option-group">
                                        <div class="option-label">Format</div>
                                        <div class="option-buttons">
                                            <button class="option-button selected" data-option="format"
                                                data-value="pdf">PDF</button>
                                            <button class="option-button" data-option="format"
                                                data-value="docx">DOCX</button>
                                            <button class="option-button" data-option="format"
                                                data-value="html">HTML</button>
                                        </div>
                                    </div>

                                    <div class="option-group">
                                        <div class="option-label">Content</div>
                                        <div class="option-buttons">
                                            <button class="option-button selected" data-option="content"
                                                data-value="all">Full Conversation</button>
                                            <button class="option-button" data-option="content"
                                                data-value="summary">Summary Only</button>
                                        </div>
                                    </div>
                                </div>

                                <div class="export-actions">
                                    <button class="export-action-button cancel-button"
                                        onclick="closeExportModal()">Cancel</button>
                                    <button class="export-action-button confirm-button"
                                        onclick="confirmExport()">Export</button>
                                </div>
                            </div>
                        </div>

                    </div>
                    <div class="content-container">
                        <iframe id="contentFrame"
                            srcdoc="<div class='loading-text'>Content preview will appear here...</div>"
                            title="Content Preview">

                        </iframe>
                    </div>
                </div>
            </section>
        </div>
    </main>

    <script type="module" src="{{url_for('static',path='js/script2.js')}}?v={{ time }}"></script>

</body>

</html>